<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>云原生 on 云原生技术圈</title><link>https://sreionet.github.io/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/</link><description>Recent content in 云原生 on 云原生技术圈</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><lastBuildDate>Mon, 23 May 2022 22:06:41 +0800</lastBuildDate><atom:link href="https://sreionet.github.io/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/index.xml" rel="self" type="application/rss+xml"/><item><title>深入了解Istio Sicader自动注入</title><link>https://sreionet.github.io/posts/istio/istio%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</link><pubDate>Mon, 23 May 2022 22:06:41 +0800</pubDate><guid>https://sreionet.github.io/posts/istio/istio%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/</guid><description>Sidecar 自动注入机制是将 sidecar 代理自动添加到用户创建的 pod。 它使用 MutatingWebhook 机制在 pod 创建的时候将 sidecar 的容器和卷添加到每个 pod 的模版里。 用户可以通过 webhooks namespaceSelector 机制来限定需要启动自动注入的范围，也可以通过注解的方式针对每个 pod 来单独启用和禁用自动注入功能。
Sidecar 是否会被自动注入取决于下面 3 条配置和 2 条安全规则：
配置: webhooks namespaceSelector 默认策略 policy pod 级别的覆盖注解 安全规则: sidecar 默认不能被注入到 kube-system 和 kube-public 这两个 namespace sidecar 不能被注入到使用 host network 网络的 pod 里 下面的表格展示了基于上述三个配置条件的最终注入状态。上述的安全规则不会被覆盖。
namespaceSelector 匹配 默认策略 sidecar.istio.io/inject 注解 Sidecar 是否注入 是 enabled true (default) 是 是 enabled false 否 是 disabled true 是 是 disabled false (default) 否 否 enabled true (default) 否 否 enabled false 否 否 disabled true 否 否 disabled false (default) 否 以下内容基于Istio 1.</description></item></channel></rss>